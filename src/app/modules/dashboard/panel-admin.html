<div class="admin-layout">
  <app-navbar [user]="user" [userRole]="userRole" [isDrawerOpen]="isDrawerOpen" (toggleDrawer)="onToggleDrawer()"
    (redirectTo)="onNavbarRedirect($event)">
  </app-navbar>

  <mat-drawer-container class="drawer-container">
    <mat-drawer #drawer mode="side" class="modern-sidebar" [opened]="isDrawerOpen">
      <div class="sidebar-content">
        <div class="sidebar-header">
          <div class="user-avatar">
            <i class="bi bi-person-circle avatar-icon"></i>
          </div>
          <div class="user-info" *ngIf="isDrawerOpen">
            <h3>{{ user }}</h3>
            <p>{{ userRole }}</p>
          </div>
        </div>

        <nav class="sidebar-nav">
          <div class="nav-section" *ngFor="let mn of menu">
            <div class="nav-category" *ngIf="!active(mn.role)">
              <button class="nav-item category-btn" (click)="toggleMenu(mn.id)"
                [class.expanded]="isMenuExpanded(mn.id)">
                <div class="nav-item-content">
                  <div class="nav-icon">
                    <i *ngIf="mn.bi" class="{{ mn.bi }}"></i>
                    <i *ngIf="mn.icon" class="bi bi-{{ mn.icon }}"></i>
                  </div>
                  <span class="nav-text" *ngIf="isDrawerOpen">{{ mn.title }}</span>
                  <i class="expand-icon bi" *ngIf="isDrawerOpen"
                    [ngClass]="isMenuExpanded(mn.id) ? 'bi-chevron-up' : 'bi-chevron-down'">
                  </i>
                </div>
              </button>

              <div class="submenu" [class.expanded]="isMenuExpanded(mn.id)" *ngIf="isDrawerOpen">
                <button class="nav-item submenu-item" *ngFor="let itm of mn.options"
                  (click)="redirectTo('dashboard/'+itm.route)" [class.active]="isActiveRoute(itm.route)"
                  [class.d-none]="activePermissions(itm.permission, itm.role)">
                  <div class="nav-item-content">
                    <div class="nav-icon submenu-icon">
                      <mat-icon *ngIf="itm.icon">{{itm.icon}}</mat-icon>
                      <i *ngIf="itm.bi" class="{{itm.bi}}"></i>
                    </div>
                    <span class="nav-text">{{itm.title}}</span>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </mat-drawer>

    <mat-drawer-content class="main-content">
      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>

    </mat-drawer-content>
  </mat-drawer-container>
</div>